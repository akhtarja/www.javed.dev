# www.javed.dev

[![Dependabot Status](https://api.dependabot.com/badges/status?host=github&repo=akhtarja/www.javed.dev)](https://dependabot.com)

This repository contains the codebase for https://www.javed.dev.

The Gulp build process places the final assets into the /build folder. The serverless deployment process creates an S3 bucket called `www.javed.dev` to hold the assets. This can be changed by editing the value of `APP_BUCKET_NAME` in `app/serverless.yml`.

## Serverless Framework Dashboard setup
### Creating the app
1. Log into the Serverless Framework Dashboard at https://dashboard.serverless.com and create an app called `www-javed-dev`. If you need to create a new org to do this, create one now and name it anything you like.
2. If this is your first time using the Serverless Framework Dashboard, run the following command and follow the prompts to complete the initial setup of the command line tool:
```
serverless login
```
Note: Serverless Dashboard documentation is available at: https://serverless.com/framework/docs/dashboard/

## Deploying the Back End
1. Clone this repo.

2. Create an AWS IAM user with programmatic access. Add the keys to your local AWS credential files using the name `www-javed-dev`.

3. The application expects the following parameters in the parameters section for the Serverless profile you plan to use:

| Variable name | Description |
| :--- | :--- |
| `WWW_JAVED_DEV_SPOTIFY_NOW_PLAYING_URL_[dev/staging/prod]` | The URL of the Spotify Now Playing API endpoint |
| `WWW_JAVED_DEV_SPOTIFY_NOW_PLAYING_KEY_[dev/staging/prod]` | The API key for use with the Spotify Now Playing endpoint |
| `WWW_JAVED_DEV_NOWPLAYING_API_CUSTOM_URL_[dev/staging/prod]` | The absolute root URL of a custom now playing endpoint URL, if desired. If this is left blank, the API endpoint URL will be automatically generated by AWS |

4. Deploy the `now-playing` service. From the project's root:
```
cd now-playing
```

The next command can be skipped if you are not deploying from a freshly cloned instance of the project:
```
serverless --org [your serverless org name] --app www-javed-dev
```

To install the dependencies and deploy the service to AWS:
```
npm ci
serverless deploy [--stage dev|staging|prod]
```

## Building the Front End
Build the application front end. Go back to the project's root and do the following for a **development environment**:
```
cd app
npm ci
npm run start
```
This will run the application in a local development server at `localhost:3000`. To create an optimized production build, run `npm run build`. The compiled assets will be created in the `build` folder.

This site uses the Bootstrap New Age theme located at https://github.com/BlackrockDigital/startbootstrap-new-age
